const ChallengeFromCSV={start:(e,t,a)=>{ChallengeFromCSV.fileParse(e).then(e=>ChallengeFromCSV.sendData(e,t,a))},sendData:(e,t,a)=>ChallengeFromCSV.postRequest("https://habitica.com/api/v3/challenges",t,a,e.Cdata).then(s=>(ChallengeFromCSV.postRequest("https://habitica.com/api/v3/tasks/challenge/"+JSON.parse(s).data.id,t,a,e.tArray),JSON.parse(s).data.id)),postRequest:(e,t,a,s={})=>{return new Promise((r,i)=>{let n=new XMLHttpRequest;n.open("POST",e),n.onerror=function(){i(this.responseText)},n.onload=function(){201===n.status?r(this.responseText):i(this.responseText)},n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("x-client","d2195ddc-a540-4dad-b3d5-34fb1ba8d319-cfc"),n.setRequestHeader("x-api-user",t),n.setRequestHeader("x-api-key",a),n.send(JSON.stringify(s))})},fileParse:e=>new Promise(function(t,a){let s=e.files;s.length>1&&a("Multiple files selected!");let r=s[0];var i=new FileReader;i.readAsText(r),i.onload=function(e){let a=e.target.result.split("\r\n"),s={group:a[4],name:a[0],shortName:a[1],summary:a[2],description:a[3],prize:a[5]},r=[];for(let e=6;e<a.length;e++){var i=a[e].split(";");if(1!==i.length){let e={type:i[0],text:i[1],notes:i[2]};var n=1;switch(i[3]){case"Trivial":n=.1;break;case"Easy":n=1;break;case"Medium":n=1.5;break;case"Hard":n=2}switch(i[0]){case"habit":e=Object.assign({priority:n,startDate:i[4]},e);break;case"daily":e=Object.assign({priority:n,frequency:i[5],startDate:i[4]},e);var l={},o="";switch(i[5]){case"daily":e=Object.assign({everyX:i[6]},e);break;case"weekly":var c=i[6].split(",");o="{";for(let e=0;e<c.length;e++)0!=c.length&&(o+='"'+c[e]+'":false',e!=c.length-1&&(o+=","));o+="}",l=JSON.parse(o),e=Object.assign({repeat:l},e);break;case"monthly":var p=i[6].split(",");o="{";for(let e=0;e<p.length;e++)0!=p.length&&(o+='"'+p[e]+'":false',e!=p.length-1&&(o+=","));if(o+="}",l=JSON.parse(o),0==i[7]){var h=i[8].split(",");e=Object.assign({repeat:l,daysOfMonth:h},e)}else{var d=i[8].split(",");e=Object.assign({repeat:l,weeksOfMonth:d},e)}}break;case"todo":e=Object.assign({priority:n,date:i[4]},e);break;case"reward":e=Object.assign({value:i[3]},e)}r.push(e)}}t({Cdata:s,tArray:r})}})};