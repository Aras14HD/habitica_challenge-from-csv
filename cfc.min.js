const ChallengeFromCSV={start:(e,t,a)=>{ChallengeFromCSV.fileParse(e).then(e=>ChallengeFromCSV.sendData(e,t,a))},sendData:(e,t,a)=>ChallengeFromCSV.postRequest("https://habitica.com/api/v3/challenges",t,a,e.Cdata).then(s=>(ChallengeFromCSV.postRequest("https://habitica.com/api/v3/tasks/challenge/"+JSON.parse(s).data.id,t,a,e.tArray),JSON.parse(s).data.id)),postRequest:(e,t,a,s={})=>new Promise((r,l)=>{let i=new XMLHttpRequest;i.open("POST",e),i.onerror=function(){l(this.responseText)},i.onload=function(){201===i.status?r(this.responseText):l(this.responseText)},i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.setRequestHeader("x-client","d2195ddc-a540-4dad-b3d5-34fb1ba8d319-cfc"),i.setRequestHeader("x-api-user",t),i.setRequestHeader("x-api-key",a),i.send(JSON.stringify(s))}),fileParse:e=>new Promise(function(t,a){let s=e.files;s.length>1&&a("Multiple files selected!");let r=s[0],l=new FileReader;l.readAsText(r),l.onload=function(e){let a=e.target.result.split("\r\n"),s={group:a[4],name:a[0],shortName:a[1],summary:a[2],description:a[3],prize:a[5]},r=[];for(let e=6;e<a.length;e++){let t=a[e].split(";");if(1!==t.length){let e={type:t[0],text:t[1],notes:t[2]},a=1;switch(t[3]){case"Trivial":a=.1;break;case"Easy":a=1;break;case"Medium":a=1.5;break;case"Hard":a=2}switch(t[0]){case"habit":e=Object.assign({priority:a,startDate:t[4]},e);break;case"daily":switch(e=Object.assign({priority:a,frequency:t[5],startDate:t[4]},e),t[5]){case"daily":e=Object.assign({everyX:t[6]},e);break;case"weekly":{let a=t[6].split(","),s="{";for(let e=0;e<a.length;e++)0!=a.length&&(s+=`"${a[e]}":false`,e!=a.length-1&&(s+=","));s+="}";let r=JSON.parse(s);e=Object.assign({repeat:r},e);break}case"monthly":{let a=t[6].split(","),s="{";for(let e=0;e<a.length;e++)0!=a.length&&(s+=`"${a[e]}":false`,e!=a.length-1&&(s+=","));s+="}";let r=JSON.parse(s);if(0==t[7]){let a=t[8].split(",");e=Object.assign({repeat:r,daysOfMonth:a},e)}else{let a=t[8].split(",");e=Object.assign({repeat:r,weeksOfMonth:a},e)}break}}case"todo":e=Object.assign({priority:a,date:t[4]},e);break;case"reward":e=Object.assign({value:t[3]},e)}r.push(e)}}t({Cdata:s,tArray:r})}})};