const ChallengeFromCSV={start:(e,t,a)=>{ChallengeFromCSV.fileParse(e).then(e=>ChallengeFromCSV.sendData(e,t,a))},sendData:(e,t,a)=>{ChallengeFromCSV.postRequest("https://habitica.com/api/v3/challenges",t,a,e.Cdata).then(function(s){var r=JSON.parse(s).data.id;ChallengeFromCSV.postRequest("https://habitica.com/api/v3/tasks/challenge/"+r,t,a,e.tArray)})},postRequest:(e,t,a,s={})=>{return new Promise((r,n)=>{let i=new XMLHttpRequest;i.open("POST",e),i.onerror=function(){n(this.responseText)},i.onload=function(){200===i.status?r(this.responseText):n(this.responseText)},i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.setRequestHeader("x-client","d2195ddc-a540-4dad-b3d5-34fb1ba8d319-cfc"),i.setRequestHeader("x-api-user",t),i.setRequestHeader("x-api-key",a),i.send(JSON.stringify(s))})},fileParse:e=>new Promise(function(t,a){var s=e.files;s.length>1&&a("Multiple files selected!");var r=s[0],n=new FileReader;n.readAsText(r),n.onload=function(e){for(var a=e.target.result.split("\r\n"),s={group:a[4],name:a[0],shortName:a[1],summary:a[2],description:a[3],prize:a[5]},r=[],n=6;n<a.length;n++){var i=a[n].split(";");console.log(i[0]);var l={type:i[0],text:i[1],notes:i[2]},o=1;switch(i[3]){case"Trivial":o=.1;break;case"Easy":o=1;break;case"Medium":o=1.5;break;case"Hard":o=2}switch(i[0]){case"habit":l=Object.assign({priority:o,startDate:i[4]},l);break;case"daily":switch(l=Object.assign({priority:o,frequency:i[5],startDate:i[4]},l),i[5]){case"daily":l=Object.assign({everyX:i[6]},l);break;case"weekly":for(var c=i[6].split(","),p="{",h=0;h<c.length;h++)0!=c.length&&(p+='"'+c[h]+'":false',h!=c.length-1&&(p+=","));p+="}";var d=JSON.parse(p);l=Object.assign({repeat:d},l);break;case"monthly":var g=i[6].split(",");p="{";for(h=0;h<g.length;h++)0!=g.length&&(p+='"'+g[h]+'":false',h!=g.length-1&&(p+=","));p+="}";d=JSON.parse(p);if(0==i[7]){var u=i[8].split(",");l=Object.assign({repeat:d,daysOfMonth:u},l)}else{var b=i[8].split(",");l=Object.assign({repeat:d,weeksOfMonth:b},l)}}break;case"todo":l=Object.assign({priority:o,date:i[4]},l);break;case"reward":l=Object.assign({value:i[3]},l)}r.push(l)}t({Cdata:s,tArray:r})}})};