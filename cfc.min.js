const ChallengeFromCSV={start:(e,a,t)=>{ChallengeFromCSV.fileParse(e).then(e=>ChallengeFromCSV.sendData(e,a,t))},sendData:(e,a,t)=>ChallengeFromCSV.postRequest("https://habitica.com/api/v3/challenges",a,t,e.Cdata).then(s=>(ChallengeFromCSV.postRequest("https://habitica.com/api/v3/tasks/challenge/"+JSON.parse(s).data.id,a,t,e.tArray),JSON.parse(s).data.id)),postRequest:(e,a,t,s={})=>{return new Promise((r,i)=>{let n=new XMLHttpRequest;n.open("POST",e),n.onerror=function(){i(this.responseText)},n.onload=function(){201===n.status?r(this.responseText):i(this.responseText)},n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("x-client","d2195ddc-a540-4dad-b3d5-34fb1ba8d319-cfc"),n.setRequestHeader("x-api-user",a),n.setRequestHeader("x-api-key",t),n.send(JSON.stringify(s))})},fileParse:e=>new Promise(function(a,t){var s=e.files;s.length>1&&t("Multiple files selected!");var r=s[0],i=new FileReader;i.readAsText(r),i.onload=function(e){for(var t=e.target.result.split("\r\n"),s={group:t[4],name:t[0],shortName:t[1],summary:t[2],description:t[3],prize:t[5]},r=[],i=6;i<t.length;i++){var n=t[i].split(";"),l={type:n[0],text:n[1],notes:n[2]},o=1;switch(n[3]){case"Trivial":o=.1;break;case"Easy":o=1;break;case"Medium":o=1.5;break;case"Hard":o=2}switch(n[0]){case"habit":l=Object.assign({priority:o,startDate:n[4]},l);break;case"daily":l=Object.assign({priority:o,frequency:n[5],startDate:n[4]},l);var c={},p="";switch(n[5]){case"daily":l=Object.assign({everyX:n[6]},l);break;case"weekly":var d=n[6].split(",");p="{";for(var h=0;h<d.length;h++)0!=d.length&&(p+='"'+d[h]+'":false',h!=d.length-1&&(p+=","));p+="}",c=JSON.parse(p),l=Object.assign({repeat:c},l);break;case"monthly":var g=n[6].split(",");for(p="{",h=0;h<g.length;h++)0!=g.length&&(p+='"'+g[h]+'":false',h!=g.length-1&&(p+=","));if(p+="}",c=JSON.parse(p),0==n[7]){var u=n[8].split(",");l=Object.assign({repeat:c,daysOfMonth:u},l)}else{var b=n[8].split(",");l=Object.assign({repeat:c,weeksOfMonth:b},l)}}break;case"todo":l=Object.assign({priority:o,date:n[4]},l);break;case"reward":l=Object.assign({value:n[3]},l)}r.push(l)}a({Cdata:s,tArray:r})}})};