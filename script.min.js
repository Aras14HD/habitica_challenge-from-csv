function displayData(e){let t=document.getElementById("UserID").value,a=document.getElementById("APItoken").value;localStorage.setItem("userID",t),localStorage.setItem("APIToken",a),sessionStorage.setItem("data",JSON.stringify(e));let n=e.Cdata,s=e.tArray;getRequest("https://habitica.com/api/v3/groups/"+n.group,t,a).then(function(e){let t="<div id='Cdata'>\n                  <h1>Challenge:</h1>\n                  ";t+=`<h2>${n.name}</h2>`,t+=`group: ${n.group}(${JSON.parse(e).data.name})<br/>`;for(const[e,a]of Object.entries(n))"name"!==e&&"group"!==e&&(t+=`${e}: ${a}<br/>`);t+="</div>\n               <div id='tArray'>\n               <h2>Tasks:</h2>";for(let e=0;e<s.length;e++){t+=`<h3>${s[e].text}:</h3>`;for(const[a,n]of Object.entries(s[e]))if("text"!==a&&"repeat"!==a&&(t+=`${a}: ${n}<br/>`),"repeat"===a){let e=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];daysn=[];for(const[e,t]of Object.entries(n))daysn.push(e);for(let t of daysn){let a=-1;switch(t){case"m":(a=e.indexOf("Monday"))>-1&&e.splice(a,1);break;case"t":(a=e.indexOf("Tuesday"))>-1&&e.splice(a,1);break;case"w":(a=e.indexOf("Wednesday"))>-1&&e.splice(a,1);break;case"th":(a=e.indexOf("Thursday"))>-1&&e.splice(a,1);break;case"f":(a=e.indexOf("Friday"))>-1&&e.splice(a,1);break;case"s":(a=e.indexOf("Saturday"))>-1&&e.splice(a,1);break;case"su":(a=e.indexOf("Sunday"))>-1&&e.splice(a,1)}}t+=`${a}: `;for(let a of e)t+=`${a},`;t+="<br/>"}}document.getElementById("Data").innerHTML=t},e=>{let t=JSON.parse(e),a=`<h1>Error:${t.error}</h1>\n                  ${t.message}`;document.getElementById("Data").innerHTML=a})}function getRequest(e,t,a){return new Promise((n,s)=>{let r=new XMLHttpRequest;r.open("GET",e),r.onerror=function(){s(this.statusText)},r.onload=function(){200==this.status?n(this.responseText):s(this.responseText)},r.setRequestHeader("x-api-user",t),r.setRequestHeader("x-api-key",a),r.setRequestHeader("x-client","456b5feb-bd5c-4046-b5b3-83606a1f6a76-cfc"),r.send()})}document.addEventListener("DOMContentLoaded",function(){null!=localStorage.getItem("userID")&&(document.getElementById("UserID").value=localStorage.getItem("userID"),document.getElementById("APItoken").value=localStorage.getItem("APIToken")),document.getElementById("challengeFile").addEventListener("change",function(){ChallengeFromCSV.fileParse(this).then(e=>{displayData(e)})},!1),document.getElementById("Submit").addEventListener("click",function(){let e=document.getElementById("UserID").value,t=document.getElementById("APItoken").value;localStorage.setItem("userID",e),localStorage.setItem("APIToken",t),ChallengeFromCSV.sendData(JSON.parse(sessionStorage.getItem("data")),e,t).then(a=>{getRequest("https://habitica.com/api/v3/challenges/"+a,e,t).then(e=>{let t=JSON.parse(e).data.name;document.getElementById("status").innerHTML=`<a href="https://habitica.com/challenges/${a}">Challenge(${t})</a>`})})})});