function displayData(e){var t=document.getElementById("UserID").value,a=document.getElementById("APItoken").value;sessionStorage.setItem("data",JSON.stringify(e));var n=e.Cdata,r=e.tArray;getRequest("https://habitica.com/api/v3/groups/"+n.group,t,a).then(function(e){var t="<div id='Cdata'>\n<h1>Challenge:</h1>\n";t+="<h2>"+n.name+"</h2>",t+="group: "+n.group+"("+JSON.parse(e).data.name+")<br/>";for(const[e,a]of Object.entries(n))"name"!==e&&"group"!==e&&(t+=e+": "+a+"<br/>");t+="</div>\n<div id='tArray'>\n<h2>Tasks:</h2>";for(var a=0;a<r.length;a++){t+="<h3>"+r[a].text+":</h3>";for(const[e,n]of Object.entries(r[a]))"text"!==e&&(t+=e+": "+n+"<br/>")}document.getElementById("Data").innerHTML=t},e=>{data=JSON.parse(e);var t="<h1>Error:"+data.error+"</h1>"+data.message;document.getElementById("Data").innerHTML=t})}function getRequest(e,t,a){return new Promise((n,r)=>{let s=new XMLHttpRequest;s.open("GET",e),s.onerror=function(){r(this.statusText)},s.onload=function(){200==this.status?n(this.responseText):r(this.responseText)},s.setRequestHeader("x-api-user",t),s.setRequestHeader("x-api-key",a),s.setRequestHeader("x-client","456b5feb-bd5c-4046-b5b3-83606a1f6a76-cfc"),s.send()})}document.addEventListener("DOMContentLoaded",function(){null!=localStorage.getItem("userID")&&(document.getElementById("UserID").value=localStorage.getItem("userID"),document.getElementById("APItoken").value=localStorage.getItem("APIToken")),document.getElementById("challengeFile").addEventListener("change",function(){ChallengeFromCSV.fileParse(this).then(e=>{displayData(e)})},!1),document.getElementById("Submit").addEventListener("click",function(){var e=document.getElementById("UserID").value,t=document.getElementById("APItoken").value;localStorage.setItem("userID",e),localStorage.setItem("APIToken",t),ChallengeFromCSV.sendData(JSON.parse(sessionStorage.getItem("data")),e,t).then(a=>{var n=a;getRequest("https://habitica.com/api/v3/challenges/"+a,e,t).then(e=>{var t=JSON.parse(e).data.name;document.getElementById("status").innerHTML='<a href="https://habitica.com/challenges/'+n+'">Challenge('+t+")</a>"})})})});